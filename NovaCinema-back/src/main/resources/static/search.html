<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>CinemaTest</title>
</head>
<body>
<h1>ğŸ¬ Cinema ì¢Œì„ ì¡°íšŒ</h1>

<label for="scheduleSelect">ìƒì˜ ì¼ì • ì„ íƒ:</label>
<select id="scheduleSelect">
    <option value="5001">5001</option>
    <option value="5002">5002</option>
    <option value="5003">5003</option>
    <option value="5004">5004</option>
    <option value="5005">5005</option>
</select>

<label for="queryType">ì¡°íšŒ ìœ í˜•:</label>
<select id="queryType">
    <option value="available">ì˜ˆì•½ ê°€ëŠ¥ ì¢Œì„</option>
    <option value="all">ì „ì²´ ì¢Œì„</option>
</select>

<button onclick="loadSeats()">ì¡°íšŒ</button>

<h2>ğŸ“‹ ì¢Œì„ ëª©ë¡</h2>
<ul id="seatList"></ul>

<script>
    function loadSeats() {
        const scheduleNum = document.getElementById('scheduleSelect').value;
        const queryType = document.getElementById('queryType').value;
        const endpoint = `http://localhost:8082/seatReservation/${queryType}?scheduleNum=${scheduleNum}`;

        fetch(endpoint)
            .then(response => response.json())
            .then(data => {
                const seatList = document.getElementById('seatList');
                seatList.innerHTML = '';

                if (data.length === 0) {
                    seatList.innerHTML = '<li>ì¡°íšŒëœ ì¢Œì„ì´ ì—†ìŠµë‹ˆë‹¤.</li>';
                    return;
                }

                data.forEach(seat => {
                    const li = document.createElement('li');
                    li.textContent = `ì¢Œì„ë²ˆí˜¸: ${seat.rowLabel}${seat.colNum} / ìœ í˜•: ${seat.seatType} / ê°€ê²©: ${seat.price}ì› / í†µë¡œ: ${seat.isAisle ? 'O' : 'X'}`;
                    seatList.appendChild(li);
                });
            })
            .catch(error => {
                console.error('ì¢Œì„ ì¡°íšŒ ì‹¤íŒ¨:', error);
                document.getElementById('seatList').innerHTML = '<li>ì„œë²„ ì˜¤ë¥˜ë¡œ ì¢Œì„ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.</li>';
            });
    }
</script>
</body>
</html>
